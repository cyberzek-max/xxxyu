<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PWA Main App Test</title>
<link rel="manifest" href="" id="manifestLink">
<style>
  body { font-family: sans-serif; padding: 20px; }
  input { font-size: 20px; padding: 8px; width: 90%; }
  button { font-size: 20px; padding: 10px 15px; margin-top: 10px; }
</style>
</head>
<body>
<h2>PWA Installation Name Test</h2>

<input id="appname" placeholder="Enter app name…">
<button onclick="updateManifest()">Update Manifest</button>

<p>After updating, open Samsung Internet → Menu → <b>Add Page to Apps</b> to install as a main app.</p>

<script>
// --- Manifest generator ---
function updateManifest() {
    const name = document.getElementById("appname").value || "DefaultApp";

    // Tiny base64 transparent 192x192 PNG
    const iconData = "data:image/png;base64,"+
    "iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAAB3A0H1AAAAF0lEQVR4nO3BMQEAAADCoPVPbQhPoAAAAAAAAAB4GwGoAAEw29qsAAAAAElFTkSuQmCC";

    const manifest = {
        "name": name,
        "short_name": name,
        "display": "standalone",
        "start_url": "./",
        "icons": [{
            "src": iconData,
            "sizes": "192x192",
            "type": "image/png"
        }]
    };

    const blob = new Blob([JSON.stringify(manifest)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    document.getElementById("manifestLink").href = url;

    alert("Manifest updated. Now install via Samsung Internet menu.");
}

// --- In-memory minimal service worker ---
if ('serviceWorker' in navigator) {
    const swCode = `
        self.addEventListener('fetch', () => {});
    `;
    const swBlob = new Blob([swCode], {type: 'application/javascript'});
    const swURL = URL.createObjectURL(swBlob);

    navigator.serviceWorker.register(swURL)
    .then(() => console.log('Service worker registered'))
    .catch(err => console.warn('Service worker failed', err));
}
</script>
</body>
</html>
